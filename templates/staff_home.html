{%extends 'base.html'%}
{%block head%}
<link rel="stylesheet" type="text/css" href="/static/css/tables.css"/>
<script type="text/javascript">
$(document).ready(function(){
    $(".lesson").hover(function(){
        $($($(this).children(".name")).children(".display").children(".icon")).show();
    },
    function(){
        $($($(this).children(".name")).children(".display").children(".icon")).hide();
    });
    $(".lesson a").click(function(){
        var url = $(this).attr("href");
        window.location.href = url;
        return false;
    });
    $(".lesson").click(function(){
        $($($(this).children(".name")).children(".details")).slideToggle(200);
    });
    $(".icon").click(function(){
        var url = $(this).attr("data-link");
        window.location.href = url;
        return false;
    });
});
</script>
<style type="text/css">
.details{
    display:none;
    margin-left:2em;
    font-size: .8em;
    padding:10px 0px;
}
.details p{
    padding:0;
    margin:0;
    color:black;
}
.details td{    
    background:linear-gradient(#FFFFE0, #FFFEBD);
}
.display{
    padding:10px 0px;
    height:18px;
}
</style>
{%endblock%}
{%block content%}
    <h1>Your Lessons</h1>
    <table id="current-lessons">
        <thead>
            <tr>
                <th>Lesson Name</th>
                <th class="creator">Creator</th>
                <th class="users">Completed</th>
            </tr>
        </thead>
        {% for l in lessons %}
            <tr class="lesson">
                <td class="name">
                    <div class="display">
                        
                    </div>
                    <div class="details">
                        <p>
                            <strong>Url:</strong> <a href="{{l.lesson.get_view_url}}">{{l.lesson.get_view_url}}</a>
                        </p>
                        <p>
                            <strong>Last Edit:</strong> {{l.lesson.last_edit_date}}
                        </p>
                        <p>
                            <strong>Response Recieved:</strong>
                            {% for u in l.students %}
                                {%if u in l.students_complete%}
                                    <span class="valid">{{u}}</span>
                                {%else%}
                                    <span class="error">{{u}}</span>
                                {%endif%}
                            {%endfor%}
                        </p>
                    </div>
                </td>
                <td class="creator">{{l.creator.get_full_name}}</td>
                <td class="users">{{l.num_complete}}/{{l.num_users}}</td>
            </tr>
           
        {% endfor %}
    </table>
{%endblock%}